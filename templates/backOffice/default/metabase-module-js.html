<script>

(function() {
    let $module = $('#metabase-module');
    let $btnGroup = $module.find('.btn-group');

    function displayTemplate (href) {
        let $tab = $module.find(href);
        let template = $tab.find('template').html();
        $tab.html(template);
    }

    function getOperation($href, $count) {
        if (3 === $count) {
            return true;
        }

        if (2 === $count) {
            return '#table-3' === $href;
        }

        if (1 === $count) {
            return '#table-3' === $href || '#table-5' === $href;
        }

        return '#table-3' === $href || '#table-5' === $href || '#table-7' === $href;
    }

    $module.find('#tabbed-menu li a').on('shown.bs.tab', function (e) {
        let $href = e.target.attributes.href.value;

        if (getOperation($href, {$countDisable})) {
            $btnGroup.show();

            let parts = $href.split('-');
            let number = parseInt(parts[1], 10) + 1;

            document.getElementById("btn_revenue").href=$href;
            document.getElementById("btn_count").href='#table-' + number;
        } else {
            displayTemplate(e.target.attributes.href.value);
            $btnGroup.hide();
        }
    });

    $btnGroup.find('.btn').on('click', function(e) {
        displayTemplate(e.target.attributes.href.value);
    });

    displayTemplate($module.find('#tabbed-menu li:first a')[0].attributes.href.value);
})()

</script>
